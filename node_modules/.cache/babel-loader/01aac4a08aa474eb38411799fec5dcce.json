{"ast":null,"code":"/**\n * Way data is stored for this database\n * For a Node.js/Node Webkit database it's the file system\n * For a browser-side database it's localforage, which uses the best backend available (IndexedDB then WebSQL then localStorage)\n *\n * This version is the browser version\n */\nvar localforage = require('localforage'); // Configure localforage to display NeDB name for now. Would be a good idea to let user use his own app name\n\n\nlocalforage.config({\n  name: 'NeDB',\n  storeName: 'nedbdata'\n});\n\nfunction exists(filename, callback) {\n  localforage.getItem(filename, function (err, value) {\n    if (value !== null) {\n      // Even if value is undefined, localforage returns null\n      return callback(true);\n    } else {\n      return callback(false);\n    }\n  });\n}\n\nfunction rename(filename, newFilename, callback) {\n  localforage.getItem(filename, function (err, value) {\n    if (value === null) {\n      localforage.removeItem(newFilename, function () {\n        return callback();\n      });\n    } else {\n      localforage.setItem(newFilename, value, function () {\n        localforage.removeItem(filename, function () {\n          return callback();\n        });\n      });\n    }\n  });\n}\n\nfunction writeFile(filename, contents, options, callback) {\n  // Options do not matter in browser setup\n  if (typeof options === 'function') {\n    callback = options;\n  }\n\n  localforage.setItem(filename, contents, function () {\n    return callback();\n  });\n}\n\nfunction appendFile(filename, toAppend, options, callback) {\n  // Options do not matter in browser setup\n  if (typeof options === 'function') {\n    callback = options;\n  }\n\n  localforage.getItem(filename, function (err, contents) {\n    contents = contents || '';\n    contents += toAppend;\n    localforage.setItem(filename, contents, function () {\n      return callback();\n    });\n  });\n}\n\nfunction readFile(filename, options, callback) {\n  // Options do not matter in browser setup\n  if (typeof options === 'function') {\n    callback = options;\n  }\n\n  localforage.getItem(filename, function (err, contents) {\n    return callback(null, contents || '');\n  });\n}\n\nfunction unlink(filename, callback) {\n  localforage.removeItem(filename, function () {\n    return callback();\n  });\n} // Nothing to do, no directories will be used on the browser\n\n\nfunction mkdirp(dir, callback) {\n  return callback();\n} // Nothing to do, no data corruption possible in the brower\n\n\nfunction ensureDatafileIntegrity(filename, callback) {\n  return callback(null);\n} // Interface\n\n\nmodule.exports.exists = exists;\nmodule.exports.rename = rename;\nmodule.exports.writeFile = writeFile;\nmodule.exports.crashSafeWriteFile = writeFile; // No need for a crash safe function in the browser\n\nmodule.exports.appendFile = appendFile;\nmodule.exports.readFile = readFile;\nmodule.exports.unlink = unlink;\nmodule.exports.mkdirp = mkdirp;\nmodule.exports.ensureDatafileIntegrity = ensureDatafileIntegrity;","map":{"version":3,"sources":["C:/Users/luani/OneDrive/√Årea de Trabalho/Desafio MM/node_modules/nedb/browser-version/browser-specific/lib/storage.js"],"names":["localforage","require","config","name","storeName","exists","filename","callback","getItem","err","value","rename","newFilename","removeItem","setItem","writeFile","contents","options","appendFile","toAppend","readFile","unlink","mkdirp","dir","ensureDatafileIntegrity","module","exports","crashSafeWriteFile"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAIA,WAAW,GAAGC,OAAO,CAAC,aAAD,CAAzB,C,CAEA;;;AACAD,WAAW,CAACE,MAAZ,CAAmB;AACjBC,EAAAA,IAAI,EAAE,MADW;AAEjBC,EAAAA,SAAS,EAAE;AAFM,CAAnB;;AAMA,SAASC,MAAT,CAAiBC,QAAjB,EAA2BC,QAA3B,EAAqC;AACnCP,EAAAA,WAAW,CAACQ,OAAZ,CAAoBF,QAApB,EAA8B,UAAUG,GAAV,EAAeC,KAAf,EAAsB;AAClD,QAAIA,KAAK,KAAK,IAAd,EAAoB;AAAI;AACtB,aAAOH,QAAQ,CAAC,IAAD,CAAf;AACD,KAFD,MAEO;AACL,aAAOA,QAAQ,CAAC,KAAD,CAAf;AACD;AACF,GAND;AAOD;;AAGD,SAASI,MAAT,CAAiBL,QAAjB,EAA2BM,WAA3B,EAAwCL,QAAxC,EAAkD;AAChDP,EAAAA,WAAW,CAACQ,OAAZ,CAAoBF,QAApB,EAA8B,UAAUG,GAAV,EAAeC,KAAf,EAAsB;AAClD,QAAIA,KAAK,KAAK,IAAd,EAAoB;AAClBV,MAAAA,WAAW,CAACa,UAAZ,CAAuBD,WAAvB,EAAoC,YAAY;AAAE,eAAOL,QAAQ,EAAf;AAAoB,OAAtE;AACD,KAFD,MAEO;AACLP,MAAAA,WAAW,CAACc,OAAZ,CAAoBF,WAApB,EAAiCF,KAAjC,EAAwC,YAAY;AAClDV,QAAAA,WAAW,CAACa,UAAZ,CAAuBP,QAAvB,EAAiC,YAAY;AAAE,iBAAOC,QAAQ,EAAf;AAAoB,SAAnE;AACD,OAFD;AAGD;AACF,GARD;AASD;;AAGD,SAASQ,SAAT,CAAoBT,QAApB,EAA8BU,QAA9B,EAAwCC,OAAxC,EAAiDV,QAAjD,EAA2D;AACzD;AACA,MAAI,OAAOU,OAAP,KAAmB,UAAvB,EAAmC;AAAEV,IAAAA,QAAQ,GAAGU,OAAX;AAAqB;;AAC1DjB,EAAAA,WAAW,CAACc,OAAZ,CAAoBR,QAApB,EAA8BU,QAA9B,EAAwC,YAAY;AAAE,WAAOT,QAAQ,EAAf;AAAoB,GAA1E;AACD;;AAGD,SAASW,UAAT,CAAqBZ,QAArB,EAA+Ba,QAA/B,EAAyCF,OAAzC,EAAkDV,QAAlD,EAA4D;AAC1D;AACA,MAAI,OAAOU,OAAP,KAAmB,UAAvB,EAAmC;AAAEV,IAAAA,QAAQ,GAAGU,OAAX;AAAqB;;AAE1DjB,EAAAA,WAAW,CAACQ,OAAZ,CAAoBF,QAApB,EAA8B,UAAUG,GAAV,EAAeO,QAAf,EAAyB;AACrDA,IAAAA,QAAQ,GAAGA,QAAQ,IAAI,EAAvB;AACAA,IAAAA,QAAQ,IAAIG,QAAZ;AACAnB,IAAAA,WAAW,CAACc,OAAZ,CAAoBR,QAApB,EAA8BU,QAA9B,EAAwC,YAAY;AAAE,aAAOT,QAAQ,EAAf;AAAoB,KAA1E;AACD,GAJD;AAKD;;AAGD,SAASa,QAAT,CAAmBd,QAAnB,EAA6BW,OAA7B,EAAsCV,QAAtC,EAAgD;AAC9C;AACA,MAAI,OAAOU,OAAP,KAAmB,UAAvB,EAAmC;AAAEV,IAAAA,QAAQ,GAAGU,OAAX;AAAqB;;AAC1DjB,EAAAA,WAAW,CAACQ,OAAZ,CAAoBF,QAApB,EAA8B,UAAUG,GAAV,EAAeO,QAAf,EAAyB;AAAE,WAAOT,QAAQ,CAAC,IAAD,EAAOS,QAAQ,IAAI,EAAnB,CAAf;AAAwC,GAAjG;AACD;;AAGD,SAASK,MAAT,CAAiBf,QAAjB,EAA2BC,QAA3B,EAAqC;AACnCP,EAAAA,WAAW,CAACa,UAAZ,CAAuBP,QAAvB,EAAiC,YAAY;AAAE,WAAOC,QAAQ,EAAf;AAAoB,GAAnE;AACD,C,CAGD;;;AACA,SAASe,MAAT,CAAiBC,GAAjB,EAAsBhB,QAAtB,EAAgC;AAC9B,SAAOA,QAAQ,EAAf;AACD,C,CAGD;;;AACA,SAASiB,uBAAT,CAAkClB,QAAlC,EAA4CC,QAA5C,EAAsD;AACpD,SAAOA,QAAQ,CAAC,IAAD,CAAf;AACD,C,CAGD;;;AACAkB,MAAM,CAACC,OAAP,CAAerB,MAAf,GAAwBA,MAAxB;AACAoB,MAAM,CAACC,OAAP,CAAef,MAAf,GAAwBA,MAAxB;AACAc,MAAM,CAACC,OAAP,CAAeX,SAAf,GAA2BA,SAA3B;AACAU,MAAM,CAACC,OAAP,CAAeC,kBAAf,GAAoCZ,SAApC,C,CAAiD;;AACjDU,MAAM,CAACC,OAAP,CAAeR,UAAf,GAA4BA,UAA5B;AACAO,MAAM,CAACC,OAAP,CAAeN,QAAf,GAA0BA,QAA1B;AACAK,MAAM,CAACC,OAAP,CAAeL,MAAf,GAAwBA,MAAxB;AACAI,MAAM,CAACC,OAAP,CAAeJ,MAAf,GAAwBA,MAAxB;AACAG,MAAM,CAACC,OAAP,CAAeF,uBAAf,GAAyCA,uBAAzC","sourcesContent":["/**\n * Way data is stored for this database\n * For a Node.js/Node Webkit database it's the file system\n * For a browser-side database it's localforage, which uses the best backend available (IndexedDB then WebSQL then localStorage)\n *\n * This version is the browser version\n */\n\nvar localforage = require('localforage')\n\n// Configure localforage to display NeDB name for now. Would be a good idea to let user use his own app name\nlocalforage.config({\n  name: 'NeDB'\n, storeName: 'nedbdata'\n});\n\n\nfunction exists (filename, callback) {\n  localforage.getItem(filename, function (err, value) {\n    if (value !== null) {   // Even if value is undefined, localforage returns null\n      return callback(true);\n    } else {\n      return callback(false);\n    }\n  });\n}\n\n\nfunction rename (filename, newFilename, callback) {\n  localforage.getItem(filename, function (err, value) {\n    if (value === null) {\n      localforage.removeItem(newFilename, function () { return callback(); });\n    } else {\n      localforage.setItem(newFilename, value, function () {\n        localforage.removeItem(filename, function () { return callback(); });\n      });\n    }\n  });\n}\n\n\nfunction writeFile (filename, contents, options, callback) {\n  // Options do not matter in browser setup\n  if (typeof options === 'function') { callback = options; }\n  localforage.setItem(filename, contents, function () { return callback(); });\n}\n\n\nfunction appendFile (filename, toAppend, options, callback) {\n  // Options do not matter in browser setup\n  if (typeof options === 'function') { callback = options; }\n\n  localforage.getItem(filename, function (err, contents) {\n    contents = contents || '';\n    contents += toAppend;\n    localforage.setItem(filename, contents, function () { return callback(); });\n  });\n}\n\n\nfunction readFile (filename, options, callback) {\n  // Options do not matter in browser setup\n  if (typeof options === 'function') { callback = options; }\n  localforage.getItem(filename, function (err, contents) { return callback(null, contents || ''); });\n}\n\n\nfunction unlink (filename, callback) {\n  localforage.removeItem(filename, function () { return callback(); });\n}\n\n\n// Nothing to do, no directories will be used on the browser\nfunction mkdirp (dir, callback) {\n  return callback();\n}\n\n\n// Nothing to do, no data corruption possible in the brower\nfunction ensureDatafileIntegrity (filename, callback) {\n  return callback(null);\n}\n\n\n// Interface\nmodule.exports.exists = exists;\nmodule.exports.rename = rename;\nmodule.exports.writeFile = writeFile;\nmodule.exports.crashSafeWriteFile = writeFile;   // No need for a crash safe function in the browser\nmodule.exports.appendFile = appendFile;\nmodule.exports.readFile = readFile;\nmodule.exports.unlink = unlink;\nmodule.exports.mkdirp = mkdirp;\nmodule.exports.ensureDatafileIntegrity = ensureDatafileIntegrity;\n\n"]},"metadata":{},"sourceType":"script"}